<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Visor.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://cardo-org.github.io/Visor.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Visor.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Getting-Started"><span>Getting Started</span></a></li><li><a class="tocitem" href="#Restart-policy-example"><span>Restart policy example</span></a></li></ul></li><li><a class="tocitem" href="process/">Process</a></li><li><a class="tocitem" href="supervisor/">Supervisor</a></li><li><a class="tocitem" href="messages/">Messages</a></li><li><a class="tocitem" href="stop_process/">Shutting down</a></li><li><a class="tocitem" href="no_handler_available/">No exception handler available</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cardo-org/Visor.jl/blob/main/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Visor"><a class="docs-heading-anchor" href="#Visor">Visor</a><a id="Visor-1"></a><a class="docs-heading-anchor-permalink" href="#Visor" title="Permalink"></a></h1><p><a href="https://github.com/cardo-org/Visor">Visor</a> is a tasks supervisor that provides a set of policies to control the logic for the shutdown and restart of tasks.</p><p>The scope of <code>Visor</code> is to provide support for reliable, long-running and fault tolerant applications written in Julia.</p><p>Visor is influenced by <a href="https://www.erlang.org/doc/design_principles/sup_princ.html#supervision-principles">Erlang Supervisor</a> design principles with the aim to fit as &quot;naturally&quot; as possible into the Julia task system.</p><h2 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h2><pre><code class="language-julia hljs">using Pkg; 
Pkg.add(&quot;Visor&quot;)</code></pre><pre><code class="language-julia hljs"># demo.jl:

using Visor

struct AppData
    count::Int
end

# Task implementation, the first argument is a task descriptor
function level_1_task(td)
    @info &quot;starting $td&quot;
    for msg in td.inbox
        if isshutdown(msg)
            break
        elseif isa(msg, AppData)
            @info &quot;$td recv: $msg&quot;
        end
    end
    @info &quot;shutting down $td&quot;
end

function level_2_task(td)
    @info &quot;starting $td&quot;
    n = 0
    while true
        sleep(0.5)
        if isshutdown(td)
            break
        end
        # send a data message to process named level_1_task
        cast(&quot;level_1_task&quot;, AppData(n))
        n += 1
    end
    @info &quot;shutting down $td&quot;
end

supervise([process(level_1_task), process(level_2_task)])</code></pre><p>On Linux machines Visor caputures <code>SIGINT</code> signal and terminate the application tasks in the reverse order of startup:</p><pre><code class="language-sh hljs">$ julia demo.jl

[ Info: starting level_1_task
[ Info: starting level_2_task
[ Info: level_1_task recv: AppData(0)
[ Info: level_1_task recv: AppData(1)
[ Info: level_1_task recv: AppData(2)
^C[ Info: shutting down level_2_task
[ Info: shutting down level_1_task
</code></pre><p>A <a href="process/#Process">Process</a> is a supervised task that is started/stopped in a deterministic way and that may be restarted in case of failure.</p><p>A process task function has a mandatory first argument that is a task descriptor <code>td</code> value that:</p><ul><li>check if a shutdown request is pending with <code>isshutdown</code>;</li><li>receive messages from the <code>inbox</code> Channel;</li></ul><pre><code class="language-julia hljs">function level_2_task(td)
    while true
        # do something ...
        if isshutdown(td)
            break
        end
    end
end</code></pre><p>If the task function is designed to receive messages the argument of <code>isshutdown</code> MUST BE the message and not the <code>task</code> object:</p><pre><code class="language-julia hljs">function level_1_task(td)
    for msg in td.inbox
        # check if it is a shutdown request 
        if isshutdown(msg)
            break
        elseif isa(msg, AppMessage)
            # do something with the application message
            # that some task sent to level_1_task.
            do_something(msg)
        end
    end
end</code></pre><p><code>supervise</code> manages processes and supervisors until all of them terminates or a shutdown is requested.</p><pre><code class="language-julia hljs">processes = [process(level_1_task), process(level_2_task)]
supervise(processes)</code></pre><p><code>supervise</code> applied to a supervisor is an example of a hierachical supervision tree:</p><pre><code class="language-julia hljs">sv = supervisor(&quot;bucket&quot;, [process(foo), process(bar)])
supervise(sv)</code></pre><p>In this case the supervisor &quot;bucket&quot; manages the tasks <code>foo</code> and <code>bar</code>, whereas in the previous example <code>level_1_task</code> and <code>level_2_task</code> are managed by the root supervisor.</p><p>see <a href="supervisor/#Supervisor">Supervisor</a> documentation for more details.</p><h2 id="Restart-policy-example"><a class="docs-heading-anchor" href="#Restart-policy-example">Restart policy example</a><a id="Restart-policy-example-1"></a><a class="docs-heading-anchor-permalink" href="#Restart-policy-example" title="Permalink"></a></h2><p>The following example show the restart on failure scenario: a task failure is simulated with an error exception that terminates the consumer.</p><pre><code class="language-julia hljs">using Visor

# Consumer process task: read messages from process inbox and print to stdout.
# The first mandatory argument process is the task descriptor object.
# With the task descriptor it is possible to receive any type of messages, for example
# shutdown requests, and send messages to other processes via call and cast methods.
function consumer(td)

    while true
        # Fetch data or control messages, 
        # for example a request to shutdown the task.
        msg = take!(td.inbox)

        # Check if msg is the shutdown control message ...
        !isshutdown(msg) || break

        println(msg)
        if msg == 5
            error(&quot;fatal error simulation&quot;)
        end

    end
end

# Producer task.
# In this case the shutdown request is not captured by checking the inbox messages but checking
# the task descriptor.
function producer(td)
    count = 1
    while true
        sleep(1)

        # send count value to consumer task
        cast(&quot;consumer&quot;, count)

        # check if was requested a shutdown (for example by SIGINT signal)
        !isshutdown(td) || break

        count += 1
    end
end

# Tasks are started following the list order and are shut down in reverse order:
# producer is started last and terminated first.
tasks = [
    process(consumer)
    process(producer, thread=true)
]

# Supervises the tasks and apply restart policies in case of process failure.
# In this case it allows a maximum of 2 process restart in 1 second time window.
# In case the fail rate is above this limit the processes are terminated and the supervisor returns.
supervise(tasks, intensity=2, period=1);</code></pre><p>The producer process sends a number every seconds to the consumer process that get it from the inbox channel and print to stdout.</p><p>When the number equals to 5 then an exception is raised, the task fails and the supervisor restarts the consumer process:</p><pre><code class="language-sh hljs">$ julia producer_consumer.jl 
1
2
3
4
5
┌ Error: [consumer] exception: ErrorException(&quot;fatal error simulation&quot;)
└ @ Visor ~/dev/Visor/src/Visor.jl:593
6
7
^C8
9</code></pre><ul><li><a href="#Visor.DEFAULT_INTENSITY"><code>Visor.DEFAULT_INTENSITY</code></a></li><li><a href="#Visor.Request"><code>Visor.Request</code></a></li><li><a href="#Visor.SupervisorResync"><code>Visor.SupervisorResync</code></a></li><li><a href="#Visor.add_node-Tuple{Visor.Supervisor, Visor.Supervised}"><code>Visor.add_node</code></a></li><li><a href="#Visor.add_processes-Tuple{Visor.Supervisor, Any}"><code>Visor.add_processes</code></a></li><li><a href="#Visor.call-Tuple{String, Any}"><code>Visor.call</code></a></li><li><a href="#Visor.call-Tuple{Visor.Supervised, Any}"><code>Visor.call</code></a></li><li><a href="#Visor.cast-Tuple{Visor.Supervised, Any}"><code>Visor.cast</code></a></li><li><a href="#Visor.cast-Tuple{Any, Any}"><code>Visor.cast</code></a></li><li><a href="#Visor.from-Tuple{String}"><code>Visor.from</code></a></li><li><a href="#Visor.from_name-Tuple{AbstractString}"><code>Visor.from_name</code></a></li><li><a href="#Visor.from_name-Tuple{Visor.Supervised, AbstractString}"><code>Visor.from_name</code></a></li><li><a href="#Visor.hassupervised-Tuple{String}"><code>Visor.hassupervised</code></a></li><li><a href="#Visor.ifrestart-Tuple{Function, Visor.Process}"><code>Visor.ifrestart</code></a></li><li><a href="#Visor.isrequest-Tuple{Any}"><code>Visor.isrequest</code></a></li><li><a href="#Visor.isshutdown-Tuple{Visor.Supervised}"><code>Visor.isshutdown</code></a></li><li><a href="#Visor.isshutdown-Tuple{Any}"><code>Visor.isshutdown</code></a></li><li><a href="#Visor.process-Tuple{Function}"><code>Visor.process</code></a></li><li><a href="#Visor.process-Tuple{Any, Function}"><code>Visor.process</code></a></li><li><a href="#Visor.receive-Tuple{Function, Visor.Process}"><code>Visor.receive</code></a></li><li><a href="#Visor.reply-Tuple{Visor.Request, Any}"><code>Visor.reply</code></a></li><li><a href="#Visor.resync-Tuple{Any, Vector{Visor.Supervised}}"><code>Visor.resync</code></a></li><li><a href="#Visor.setname-Tuple{Visor.Process, AbstractString}"><code>Visor.setname</code></a></li><li><a href="#Visor.setroot-Tuple{}"><code>Visor.setroot</code></a></li><li><a href="#Visor.setsupervisor-Tuple{Visor.Supervisor}"><code>Visor.setsupervisor</code></a></li><li><a href="#Visor.shutdown"><code>Visor.shutdown</code></a></li><li><a href="#Visor.shutdown-Tuple{}"><code>Visor.shutdown</code></a></li><li><a href="#Visor.startup-Tuple{Visor.Supervised}"><code>Visor.startup</code></a></li><li><a href="#Visor.startup-Tuple{Visor.Supervisor, Visor.Supervised}"><code>Visor.startup</code></a></li><li><a href="#Visor.supervise-Tuple{Visor.Supervised}"><code>Visor.supervise</code></a></li><li><a href="#Visor.supervise-Tuple{Vector{&lt;:Visor.Supervised}}"><code>Visor.supervise</code></a></li><li><a href="#Visor.supervisor"><code>Visor.supervisor</code></a></li><li><a href="#Visor.@isshutdown-Tuple{Any}"><code>Visor.@isshutdown</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="Visor.DEFAULT_INTENSITY" href="#Visor.DEFAULT_INTENSITY"><code>Visor.DEFAULT_INTENSITY</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Maximun numbers of restart in period seconds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L9-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.Request" href="#Visor.Request"><code>Visor.Request</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A response value is expected when a Request message is pushed to the target process inbox.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L49-L52">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.SupervisorResync" href="#Visor.SupervisorResync"><code>Visor.SupervisorResync</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Trigger a supervisor resync</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L485">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.add_node-Tuple{Visor.Supervisor, Visor.Supervised}" href="#Visor.add_node-Tuple{Visor.Supervisor, Visor.Supervised}"><code>Visor.add_node</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_node(supervisor::Supervisor, proc::Supervised)</code></pre><p>Add supervised <code>proc</code> to the children&#39;s collection of the controlling <code>supervisor</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L679-L683">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.add_processes-Tuple{Visor.Supervisor, Any}" href="#Visor.add_processes-Tuple{Visor.Supervisor, Any}"><code>Visor.add_processes</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_processes(
    svisor::Supervisor,
    processes;
    intensity,
    period,
    strategy,
    terminateif::Symbol=:empty
)::Supervisor</code></pre><p>Setup hierarchy relationship between supervisor and supervised list of processes and configure supervisor behavior.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L720-L732">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.call-Tuple{String, Any}" href="#Visor.call-Tuple{String, Any}"><code>Visor.call</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">call(name::String, request::Any; timeout::Real=3)</code></pre><p>Send a <code>request</code> to the process identified by full <code>name</code> and wait for a response.</p><p>If <code>timeout</code> is equal to -1 then waits forever, otherwise if a response is not received in <code>timeout</code> seconds an <code>ErrorException</code> is raised.</p><p>The message sent to the target task is a <code>Request</code> struct that contains the request and a channel for sending back the response.</p><pre><code class="language-julia hljs">using Visor

function server(task)
    for msg in task.inbox
        isshutdown(msg) &amp;&amp; break
        put!(msg.inbox, msg.request * 2)
    end
    println(&quot;server done&quot;)
end

function requestor(task)
    request = 10
    response = call(&quot;server&quot;, request)
    println(&quot;server(&quot;,request,&quot;)=&quot;,response)
    shutdown()
end

supervise([process(server), process(requestor)])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1230-L1260">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.call-Tuple{Visor.Supervised, Any}" href="#Visor.call-Tuple{Visor.Supervised, Any}"><code>Visor.call</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">call(target::Supervised, request::Any; timeout::Real=-1)</code></pre><p>Send a <code>request</code> to <code>target</code> process and wait for a response.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1269-L1273">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.cast-Tuple{Any, Any}" href="#Visor.cast-Tuple{Any, Any}"><code>Visor.cast</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cast(name::String, message::Any)</code></pre><p>Send a <code>message</code> to process with full <code>name</code> without waiting for a response.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1322-L1326">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.cast-Tuple{Visor.Supervised, Any}" href="#Visor.cast-Tuple{Visor.Supervised, Any}"><code>Visor.cast</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cast(process::Supervised, message)</code></pre><p>The <code>message</code> value is sent to <code>target</code> process without waiting for a response.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1312-L1316">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.from-Tuple{String}" href="#Visor.from-Tuple{String}"><code>Visor.from</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">from(name::String)::Supervised</code></pre><p>Return the supervised node identified by full <code>name</code>.</p><p>Given for example the process <code>mytask</code> supervised by <code>mysupervisor</code>:</p><pre><code class="language-julia hljs">supervisor(&quot;mysupervisor&quot;, [process(mytask)])</code></pre><p>then the full name of <code>mytask</code> process is <code>mysupervisor.mytask</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1146-L1156">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.from_name-Tuple{AbstractString}" href="#Visor.from_name-Tuple{AbstractString}"><code>Visor.from_name</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">from_name(name::AbstractString)</code></pre><p>Return the process supervised by the root supervisor that is identified by <code>name</code> or nothing if such process does not exists.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1206-L1211">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.from_name-Tuple{Visor.Supervised, AbstractString}" href="#Visor.from_name-Tuple{Visor.Supervised, AbstractString}"><code>Visor.from_name</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">from_name(container::Supervised, name::AbstractString)</code></pre><p>Return the process identified by <code>name</code> that is supervised by <code>container</code> or nothing if such process does not exists.</p><p>It may be useful in case the process name contains dots because it does not lookup the supervision hierarchy using the dot as separator between nodes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1189-L1197">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.hassupervised-Tuple{String}" href="#Visor.hassupervised-Tuple{String}"><code>Visor.hassupervised</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">hassupervised(name::String)</code></pre><p>Determine whether the supervised identified by <code>name</code> exists.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1124-L1128">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.ifrestart-Tuple{Function, Visor.Process}" href="#Visor.ifrestart-Tuple{Function, Visor.Process}"><code>Visor.ifrestart</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ifrestart(fn, process)</code></pre><p>Call the no-argument function <code>fn</code> if the <code>process</code> restarted.</p><p>The function <code>fn</code> is not executed at the first start of <code>process</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L970-L976">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.isrequest-Tuple{Any}" href="#Visor.isrequest-Tuple{Any}"><code>Visor.isrequest</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isrequest(message)</code></pre><p>Return true if message is a <code>Request</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1342-L1346">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.isshutdown-Tuple{Any}" href="#Visor.isshutdown-Tuple{Any}"><code>Visor.isshutdown</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isshutdown(msg)</code></pre><p>Returns <code>true</code> if message <code>msg</code> is a shutdown command.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1088-L1092">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.isshutdown-Tuple{Visor.Supervised}" href="#Visor.isshutdown-Tuple{Visor.Supervised}"><code>Visor.isshutdown</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function isshutdown(process::Supervised)</code></pre><p>Returns <code>true</code> if process has a shutdown command in its inbox.</p><p>As a side effect remove messages from process inbox until a <code>shutdown</code> request is found.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1095-L1101">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.process-Tuple{Any, Function}" href="#Visor.process-Tuple{Any, Function}"><code>Visor.process</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">process(id, fn;
        args=(),
        namedargs=(;),
        force_interrupt_after::Real=1.0,
        stop_waiting_after::Real=Inf,
        debounce_time=NaN,
        trace_exception=false,
        thread=true,
        restart=:transient)::ProcessSpec</code></pre><p>Declare a supervised task that may be forcibly interrupted.</p><p><code>id</code> is the process name and <code>fn</code> is the task function.</p><p><code>process</code> returns only a specification: the task function has to be started with <a href="#Visor.supervise-Tuple{Vector{&lt;:Visor.Supervised}}"><code>supervise</code></a>.</p><p>See <a href="#Visor.process-Tuple{Any, Function}"><code>process</code></a> online docs for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L365-L384">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.process-Tuple{Function}" href="#Visor.process-Tuple{Function}"><code>Visor.process</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">process(fn;
        args=(),
        namedargs=(;),
        force_interrupt_after::Real=1.0,
        stop_waiting_after::Real=Inf,
        debounce_time=NaN,
        thread=true,
        restart=:transient)::ProcessSpec</code></pre><p>The process name is set equals to <code>string(fn)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L417-L428">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.receive-Tuple{Function, Visor.Process}" href="#Visor.receive-Tuple{Function, Visor.Process}"><code>Visor.receive</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function receive(fn::Function, pd::Process)</code></pre><p>Execute <code>fn(msg)</code> for every message <code>msg</code> delivered to the <code>pd</code> Process.</p><p>Return if a <code>Shutdown</code> control message is received.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1214-L1220">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.reply-Tuple{Visor.Request, Any}" href="#Visor.reply-Tuple{Visor.Request, Any}"><code>Visor.reply</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reply(request::Request, response::Any)</code></pre><p>Send the <code>response</code> to the <code>call</code> method that issued the <code>request</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1329-L1333">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.resync-Tuple{Any, Vector{Visor.Supervised}}" href="#Visor.resync-Tuple{Any, Vector{Visor.Supervised}}"><code>Visor.resync</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">resync(supervisor)</code></pre><p>Restart processes previously stopped by supervisor policies.</p><p>Return true if all supervised processes terminated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L879-L885">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.setname-Tuple{Visor.Process, AbstractString}" href="#Visor.setname-Tuple{Visor.Process, AbstractString}"><code>Visor.setname</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setname(process::Process, new_name::AbstractString)</code></pre><p>Change the process name</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L215-L219">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.setroot-Tuple{}" href="#Visor.setroot-Tuple{}"><code>Visor.setroot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setroot(;
    intensity::Int=1,
    period::Int=DEFAULT_PERIOD,
    strategy::Symbol=:one_for_one,
    terminateif::Symbol=:empty,
    handler::Union{Nothing,Function}=nothing,
)</code></pre><p>Setup root supervisor settings.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1571-L1581">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.setsupervisor-Tuple{Visor.Supervisor}" href="#Visor.setsupervisor-Tuple{Visor.Supervisor}"><code>Visor.setsupervisor</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setsupervisor(sv::Supervisor;
    intensity::Int=1,
    period::Int=DEFAULT_PERIOD,
    strategy::Symbol=:one_for_one,
    terminateif::Symbol=:empty,
    handler::Union{Nothing,Function}=nothing,
)</code></pre><p>Setup supervisor settings.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1597-L1607">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.shutdown" href="#Visor.shutdown"><code>Visor.shutdown</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">shutdown(node)</code></pre><p>Try to shutdown a process or a supervisor.</p><p>If <code>node</code> is a supervisor it first attempts to shutdown all children nodes and then it stop the supervisor. If some process refuse to shutdown the <code>node</code> supervisor is not stopped.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1019-L1026">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.shutdown-Tuple{}" href="#Visor.shutdown-Tuple{}"><code>Visor.shutdown</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">shutdown()</code></pre><p>Shutdown all supervised nodes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1081-L1085">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.startup-Tuple{Visor.Supervised}" href="#Visor.startup-Tuple{Visor.Supervised}"><code>Visor.startup</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">startup(proc::Supervised)</code></pre><p>Start the supervised process defined by <code>proc</code> as children of the root supervisor.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L640-L644">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.startup-Tuple{Visor.Supervisor, Visor.Supervised}" href="#Visor.startup-Tuple{Visor.Supervisor, Visor.Supervised}"><code>Visor.startup</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">startup(supervisor::Supervisor, proc::Supervised)</code></pre><p>Start the supervised process defined by <code>proc</code> as child of <code>supervisor</code>.</p><pre><code class="language-julia-repl hljs">julia&gt; using Visor

julia&gt; foo(self) = println(&quot;foo process started&quot;);

julia&gt; main(self) = startup(self.supervisor, process(foo));

julia&gt; supervise([process(main)]);
foo process started</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L647-L662">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.supervise-Tuple{Vector{&lt;:Visor.Supervised}}" href="#Visor.supervise-Tuple{Vector{&lt;:Visor.Supervised}}"><code>Visor.supervise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">supervise(processes::Vector{&lt;:Supervised};
          intensity::Int=DEFAULT_INTENSITY,
          period::Int=DEFAULT_PERIOD,
          strategy::Symbol=:one_for_one,
          terminateif::Symbol=:empty,
          handler::Union{Nothing, Function}=nothing,
          wait::Bool=true)::Supervisor</code></pre><p>The root supervisor start a family of supervised <code>processes</code>.</p><p>Return the root supervisor or wait for supervisor termination if <code>wait</code> is true.</p><p><strong>Arguments</strong></p><ul><li><code>intensity::Int</code>: maximum number of restarts allowed in <code>period</code> seconds.</li><li><code>period::Int</code>: time interval that controls the restart intensity.</li><li><code>strategy::Symbol</code>: defines the restart strategy:<ul><li><code>:one_for_one</code>: only the terminated task is restarted.</li><li><code>:one_for_all</code>: if a child task terminates, all other tasks are terminated, and then all children,                 including the terminated one, are restarted.</li><li><code>:rest_for_one</code>: if a child task terminates, the rest of the children tasks (that is, the child tasks                  after the terminated process in start order) are terminated. Then the terminated                  child task and the rest of the child tasks are restarted.</li><li><code>:one_terminate_all</code>: if a child task terminates then the remaining tasks will be concurrently terminated                       (the startup order is not respected).</li></ul></li><li><code>terminateif::Symbol</code>:<ul><li><code>:empty</code>: terminate the supervisor when all child tasks terminate.</li><li><code>:shutdown</code>: the supervisor terminate at shutdown.</li></ul></li><li><code>handler</code>: a callback function with prototype <code>fn(process, event)</code> invoked when process events occurs:</li></ul><p>when process tasks throws exception and when a process terminate because of a <code>ProcessFatal</code> reason.</p><ul><li><code>wait::Bool</code>: wait for supervised nodes termination.</li></ul><pre><code class="language-julia hljs">    children = [process(worker, args=(15,&quot;myid&quot;))]
    supervise(children)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1384-L1421">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.supervise-Tuple{Visor.Supervised}" href="#Visor.supervise-Tuple{Visor.Supervised}"><code>Visor.supervise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">supervise(proc::Supervised;
          intensity::Int=DEFAULT_INTENSITY,
          period::Int=DEFAULT_PERIOD,
          strategy::Symbol=:one_for_one,
          terminateif::Symbol=:empty,
          handler::Union{Nothing, Function}=nothing,
          wait::Bool=true)::Supervisor</code></pre><p>The root supervisor start a supervised process defined by <code>proc</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1469-L1479">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.supervisor" href="#Visor.supervisor"><code>Visor.supervisor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">supervisor(
    id, processes;
    intensity=DEFAULT_INTENSITY,
    period=DEFAULT_PERIOD,
    strategy=:one_for_one,
    terminateif=:empty)::Supervisor</code></pre><p>Declare a supervisor of one or more <code>processes</code>.</p><p><code>processes</code> may be a <code>Process</code> or an array of <code>Process</code>.</p><pre><code class="language-julia-repl hljs">julia&gt; using Visor

julia&gt; mytask(pd) = ();

julia&gt; supervisor(&quot;mysupervisor&quot;, process(mytask))
mysupervisor</code></pre><p>```jldoctest julia&gt; using Visor</p><p>julia&gt; tsk1(pd) = ();</p><p>julia&gt; tsk2(pd) = ();</p><p>julia&gt; supervisor(&quot;mysupervisor&quot;, [process(tsk1), process(tsk2)]) mysupervisor</p><p>See <a href="supervisor/#Supervisor">Supervisor</a> documentation for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L281-L313">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Visor.@isshutdown-Tuple{Any}" href="#Visor.@isshutdown-Tuple{Any}"><code>Visor.@isshutdown</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@isshutdown process_descriptor
@isshutdown msg</code></pre><p>Break the loop if a shutdown control message is received.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Visor.jl/blob/1e0115ee2fc3b5372b36b4471e768bad06479cb5/src/Visor.jl#L1071-L1076">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="process/">Process »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Sunday 9 November 2025 18:40">Sunday 9 November 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
